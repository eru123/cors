function render_result(e){"string"!=typeof e&&(e=JSON.stringify(e,null,2));const t=document.querySelector("#result-root").querySelector(".result-wrapper");t.innerHTML="";const n=document.createElement("h3");n.innerText="Result";const r=document.createElement("pre");r.classList.add("result");const o=document.createElement("code");o.innerText=e,r.appendChild(o),t.appendChild(n),t.appendChild(r)}function init(){form=document.querySelector("form"),form.addEventListener("submit",(async function(e){e.preventDefault();const t=document.querySelector("input[type=text]").value,n=encodeURIComponent(t),r=document.querySelector("#result-root");let o=r.querySelector(".result-wrapper");o?o.innerHTML='<pre class="result">Loading...</pre>':(o=document.createElement("div"),o.classList.add("result-wrapper"),o.innerHTML='<pre class="result">Loading...</pre>',r.appendChild(o));const c=await fetch(`/cors/${n}`);if(c.headers.get("content-type").includes("application/json")){render_result(await c.json())}else{render_result(await c.text())}}))}window.onload=init;
